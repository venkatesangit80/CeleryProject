---
applications:
  - name: your-main-app
    memory: 512M
    instances: 1
    buildpacks:
      - python_buildpack
    path: path/to/your/main/app
    command: python app.py
    env:
      # Environment variables for the main application
      CELERY_BROKER_URL: redis://your-redis-service:6379/0
      CELERY_RESULT_BACKEND: redis://your-redis-service:6379/0

  - name: your-flower-app
    memory: 256M
    instances: 1
    buildpacks:
      - python_buildpack
    command: celery -A your_main_app flower --port=$PORT
    env:
      # Ensure the same environment variables are set for Flower
      CELERY_BROKER_URL: redis://your-redis-service:6379/0
      CELERY_RESULT_BACKEND: redis://your-redis-service:6379/0